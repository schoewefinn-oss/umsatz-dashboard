<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Umsatz Dashboard</title>
<style>
*{box-sizing:border-box}
body{margin:0;font-family:'Segoe UI',sans-serif;background:radial-gradient(circle at top,#020617,#000);color:#e5e7eb;}

/* LOGIN SCREEN */
#loginScreen{display:flex;align-items:center;justify-content:center;height:100vh;background:#020617;}
#loginBox{ text-align:center;background:#111;padding:40px;border-radius:20px;box-shadow:0 0 40px rgba(56,189,248,.4);position:relative;}
#loginBox input{padding:10px;width:200px;margin:10px;border-radius:8px;border:none;}
#loginBox button{padding:10px 20px;border-radius:8px;border:none;background:#38bdf8;color:#000;cursor:pointer;}
#errorMsg{color:red;margin-top:10px;display:none;}
#loginSuccess{position:absolute;top:-20px;right:-20px;width:50px;height:50px;background:#22c55e;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transform:scale(0);transition:0.5s;}
#loginSuccess.show{opacity:1;transform:scale(1);}
#loginSuccess:after{content:'‚úî';color:#fff;font-size:24px;font-weight:bold;}

/* DASHBOARD */
#dashboard{display:none;}
header{text-align:center;padding:50px 20px;position:relative}
header h1{font-size:3.2rem;color:#38bdf8;text-shadow:0 0 30px rgba(56,189,248,.6);}
#search{margin-top:25px;width:100%;max-width:460px;padding:16px;border-radius:16px;border:none;background:#020617;color:white;outline:none;box-shadow:0 0 30px rgba(56,189,248,.35);display:block;margin-left:auto;margin-right:auto;}
.profileTopRight{position:absolute;top:20px;right:20px;background:rgba(2,6,23,0.9);padding:10px 20px;border-radius:15px;display:flex;align-items:center;gap:10px;box-shadow:0 0 30px rgba(56,189,248,.5);}
.profileTopRight img{width:40px;height:40px;border-radius:8px;image-rendering:pixelated;}
.roleLabel{font-weight:bold;padding:2px 6px;border-radius:5px;font-size:0.9rem;}
.roleInhaber{background:#991b1b;color:#fff;} /* dunkelrot */
.roleHelfer{background:#eab308;color:#000;} /* gelb */

/* OWNER PANEL */
.ownerPanel{
  position:fixed;
  top:20px;
  left:20px;
  background:rgba(2,6,23,0.95);
  padding:20px;
  border-radius:15px;
  box-shadow:0 0 30px rgba(56,189,248,.5);
  text-align:left;
  z-index:9999;
}
.ownerPanel img{width:64px;height:64px;border-radius:8px;image-rendering:pixelated;display:block;margin-bottom:10px;}
.ownerPanel input{
  width:140px;border-radius:6px;border:none;padding:6px;margin:4px 0;background:#111;color:white;font-size:1rem;
}
.ownerPanel input:focus{
  outline:2px solid #38bdf8;
  animation: pulse 0.5s;
}
@keyframes pulse{
  0%{box-shadow:0 0 0px #38bdf8;}
  50%{box-shadow:0 0 10px #38bdf8;}
  100%{box-shadow:0 0 0px #38bdf8;}
}
#profit{display:inline-block;min-width:60px;font-size:1.1rem;}

/* CONTAINER & CARDS */
.container{max-width:1300px;margin:auto;padding:20px}
.card{background:rgba(2,6,23,.9);border-radius:25px;padding:25px;margin-bottom:35px;box-shadow:0 0 50px rgba(0,0,0,.8);animation:fadeUp .8s ease}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1}}
.top3{display:flex;justify-content:center;gap:30px;flex-wrap:wrap}
.top-card{width:260px;text-align:center;padding:25px;border-radius:25px;transition:.4s}
.top-card:hover{transform:scale(1.08)}
.top-card img{width:110px;height:110px;image-rendering:pixelated}
.gold{box-shadow:0 0 40px rgba(250,204,21,.7)}
.silver{box-shadow:0 0 30px rgba(203,213,225,.6)}
.bronze{box-shadow:0 0 30px rgba(251,146,60,.6)}
.players{max-height:520px;overflow-y:auto}
.player{display:flex;align-items:center;gap:16px;padding:14px;border-bottom:1px solid #1e293b;transition:.3s;cursor:pointer}
.player:hover{background:rgba(56,189,248,.1);transform:scale(1.015)}
.player img{width:44px;height:44px;border-radius:8px;image-rendering:pixelated}
.hgw{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:25px}
.hgw-card{padding:25px;border-radius:25px;box-shadow:0 0 35px rgba(250,204,21,.3);transition:.4s}
.hgw-card:hover{transform:translateY(-8px) scale(1.03)}
.last{display:flex;align-items:center;gap:10px;margin-top:10px}
.last img{width:32px;height:32px;border-radius:6px;image-rendering:pixelated}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.7);display:none;align-items:center;justify-content:center;}
.modal-content{background:#020617;padding:30px;border-radius:25px;text-align:center;box-shadow:0 0 40px rgba(56,189,248,.4);animation:fadeUp .4s ease}
.modal-content img{width:128px;height:128px;image-rendering:pixelated}
.close{cursor:pointer;color:#38bdf8;margin-top:15px}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginScreen">
  <div id="loginBox">
    <div id="loginSuccess"></div>
    <h2 style="color:#38bdf8;">üîê Login</h2>
    <input id="username" placeholder="Benutzername"><br>
    <input id="password" type="password" placeholder="Passwort"><br>
    <button id="loginBtn">Login</button>
    <p id="errorMsg">Falscher Benutzername oder Passwort</p>
  </div>
</div>

<!-- DASHBOARD -->
<div id="dashboard">

<!-- Owner Panel oben links -->
<div class="ownerPanel" id="ownerPanel">
  <img src="https://minotar.net/avatar/ItalyGameCB1/64" alt="Bot Skin">
  <div style="margin-top:10px;">
    <label>üí∏ Eingenommen: </label>
    <input type="number" id="income" value="0" min="0">
    <label>üí∞ Ausgegeben: </label>
    <input type="number" id="expense" value="0" min="0"><br>
    <button id="addBtn" style="margin-top:5px;padding:5px 12px;border-radius:5px;border:none;background:#38bdf8;color:#000;cursor:pointer;">Eintragen</button><br>
    <strong>Verdient: <span id="profit">0 $</span></strong>
  </div>
</div>

<header>
  <h1>üìä Umsatz Dashboard</h1>
  <input id="search" placeholder="üîç Spieler suchen...">
  <div class="profileTopRight" id="profileTop"></div>
</header>

<div class="container">
<div class="card">
  <h2>üèÜ Top 3 Spieler</h2>
  <div class="top3" id="top3"></div>
</div>
<div class="card">
  <h2>üë• Alle Spieler</h2>
  <div class="players" id="players"></div>
</div>
<div class="card">
  <h2>üé∞ HGW ‚Äì Hauptgewinne</h2>
  <div class="hgw" id="hgw"></div>
</div>
</div>
</div>

<!-- PROFILE MODAL -->
<div class="modal" id="modal">
  <div class="modal-content" id="modalContent"></div>
</div>

<script>
// LOGIN USERS
const users = [
  {username:"Lafre", password:"ItalyGameCB1", role:"Inhaber"},
  {username:"Lattenrost1234", password:"ItalyGameCB1", role:"Inhaber"},
  {username:"JasonNewAcc", password:"JasonStinkt", role:"Helfer"}
];

const loginScreen = document.getElementById("loginScreen");
const dashboard = document.getElementById("dashboard");
const errorMsg = document.getElementById("errorMsg");
const loginSuccess = document.getElementById("loginSuccess");
const profileTop = document.getElementById("profileTop");

const incomeInput2 = document.getElementById('income');
const expenseInput2 = document.getElementById('expense');
const profitDisplay2 = document.getElementById('profit');
const addBtn2 = document.getElementById('addBtn');

let totalIncome = parseFloat(localStorage.getItem('totalIncome')) || 0;
let totalExpense = parseFloat(localStorage.getItem('totalExpense')) || 0;

// ROLE LABEL
function getRoleLabel(username){
  const user = users.find(u=>u.username===username);
  if(!user || !user.role) return '';
  if(user.role==='Inhaber') return `<span class="roleLabel roleInhaber">Inhaber</span>`;
  if(user.role==='Helfer') return `<span class="roleLabel roleHelfer">Helfer</span>`;
  return '';
}

// PROFILE TOP RIGHT
function renderProfileTop(user){
  const username = user.username;
  const userData = wagers.find(p=>p.playername===username);
  if(!userData) return;
  const rank = wagers.findIndex(p=>p.playername===username)+1;
  profileTop.innerHTML = `
    <img src="https://minotar.net/avatar/${username}/64">
    <div style="text-align:right;">
      <strong>Angemeldet als ${username}</strong><br>
      ${getRoleLabel(username)}<br>
      Platz: #${rank}<br>
      üí∞ Umsatz: ${userData.wager.toLocaleString("de-DE")} $
    </div>
  `;
}

// Owner Panel Zugriff kontrollieren
function renderOwnerPanelAccess(user){
  const isOwner = user.role === "Inhaber";
  incomeInput2.disabled = !isOwner;
  expenseInput2.disabled = !isOwner;
  addBtn2.disabled = !isOwner;
  if(!isOwner){
    incomeInput2.style.backgroundColor = "#222";
    expenseInput2.style.backgroundColor = "#222";
    addBtn2.style.backgroundColor = "#555";
    addBtn2.style.cursor = "not-allowed";
  }
}

// LOGIN
document.getElementById("loginBtn").addEventListener("click",()=>{
  const user = document.getElementById("username").value;
  const pass = document.getElementById("password").value;
  const valid = users.find(u=>u.username===user && u.password===pass);
  if(valid){
    loginSuccess.classList.add("show");
    setTimeout(()=>{
      loginScreen.style.display="none";
      dashboard.style.display="block";
      loginSuccess.classList.remove("show");
      renderProfileTop(valid);
      renderPlayers();
      renderOwnerPanelAccess(valid);
    },800);
  } else { errorMsg.style.display="block"; }
});

// RAW DATA
const rawWagers = [
  ["JasonNewAcc", 26600023],
  ["zNight649", 19100023],
  ["CrafterXD1", 6100010],
  ["Premium_man_", 6900007],
  ["Wintersled", 3200005],
  ["salina3534", 4000005],
  ["Znaq0", 2500002],
  ["ItsZynex", 2100004],
  ["1Unbekannter", 7300001],
  ["HansBratiGeming", 1500003],
  ["ClapByMarlon", 1100001],
  ["Lafre", 1000001],
  ["1AGames", 1000001],
  ["13Mio", 800001],
  ["Yxlukas", 800001],
  ["JoneBone09", 700001],
  ["DrInk3653", 500001],
  ["PropTheReal", 500001],
  ["hayzce", 1000002],
  ["Mulle301", 1000002],
  ["Lattenrost1234", 400000],
  ["Cymian", 300000],
  ["SpaceAlexvomBVB", 300000],
  ["!GrafBrotIstDa", 2000004],
  ["1real_nox", 200000],
  ["7Brr", 200000],
  ["xAlserak", 200000],
  ["Hellekerze", 200000],
  ["KSCDennis", 200000],
  ["117p", 200000],
  ["Teiuqeb", 100000],
  ["Vexamar", 100000],
  ["Bekarus_", 100000],
  ["Jannator17", 100000],
  ["ImVirox", 900000],
  ["mylexxx", 200000]
];


const wagerMap = {};
rawWagers.forEach(([name,amount])=>{wagerMap[name]=(wagerMap[name]||0)+amount;});
const wagers = Object.entries(wagerMap).map(([playername,wager])=>({playername,wager}))
.sort((a,b)=>b.wager-a.wager);

// TOP 3
["gold","silver","bronze"].forEach((cls,i)=>{
  const p=wagers[i];
  if(!p) return;
  top3.innerHTML+=`
  <div class="top-card ${cls}">
    <img src="https://minotar.net/avatar/${p.playername}/128">
    <h3>#${i+1} ${p.playername} ${getRoleLabel(p.playername)}</h3>
    üí∞ ${p.wager.toLocaleString("de-DE")} $
  </div>`;
});

// ALL PLAYERS
function renderPlayers(filter=""){
  players.innerHTML="";
  wagers.filter(p=>p.playername.toLowerCase().includes(filter))
  .forEach((p,i)=>{
    players.innerHTML+=`
    <div class="player" onclick='openProfile(${JSON.stringify(p)},${i})'>
      <img src="https://minotar.net/avatar/${p.playername}/64">
      <div><strong>${p.playername} ${getRoleLabel(p.playername)}</strong><br>üí∞ ${p.wager.toLocaleString("de-DE")} $</div>
    </div>`;
  });
}
search.oninput=e=>renderPlayers(e.target.value.toLowerCase());

// PROFILE MODAL
const modal = document.getElementById("modal");
const modalContent = document.getElementById("modalContent");
function openProfile(p,i){
  modal.style.display="flex";
  modalContent.innerHTML=`
    <img src="https://minotar.net/avatar/${p.playername}/128">
    <h2>${p.playername} ${getRoleLabel(p.playername)}</h2>
    <p>üèÜ Rang: #${i+1}</p>
    <p>üí∞ Umsatz: ${p.wager.toLocaleString("de-DE")} $</p>
    <div class="close" onclick="modal.style.display='none'">Schlie√üen</div>
  `;
}

// HGW
const jackpots=[
  {price:54000000,times:18,last:"zNight649"},
  {price:30000000,times:60,last:"zNight649"}
];
jackpots.forEach(j=>{
  hgw.innerHTML+=`
  <div class="hgw-card">
    <h3>üíé Gewinn ${j.price.toLocaleString("de-DE")} $</h3>
    <p>üéüÔ∏è ${j.times}x gezogen</p>
    <p>üí∞ Gesamt ${(j.price*j.times).toLocaleString("de-DE")} $</p>
    <div class="last">
      <img src="https://minotar.net/avatar/${j.last}/32">
      Letzter Gewinner: <strong>${j.last} ${getRoleLabel(j.last)}</strong>
    </div>
  </div>`;
});

// OWNER PANEL LOGIC
function updateProfitDisplay2(){
  const profit = totalIncome - totalExpense;
  profitDisplay2.textContent = profit.toLocaleString("de-DE") + " $";
  profitDisplay2.style.color = profit >= 0 ? "#22c55e" : "#ef4444";
  localStorage.setItem('totalIncome', totalIncome);
  localStorage.setItem('totalExpense', totalExpense);
}

addBtn2.addEventListener('click',()=>{
  const username = document.getElementById("username").value; 
  const currentUser = users.find(u => u.username === username);
  if(!currentUser || currentUser.role !== "Inhaber"){
    alert("Nur Inhaber k√∂nnen Eintr√§ge vornehmen!");
    return;
  }
  const inc = parseFloat(incomeInput2.value) || 0;
  const exp = parseFloat(expenseInput2.value) || 0;
  totalIncome += inc;
  totalExpense += exp;
  incomeInput2.value = 0;
  expenseInput2.value = 0;
  updateProfitDisplay2();
});

updateProfitDisplay2();
</script>
</body>
</html>



